import{_ as c,d as g,b2 as _,o as F,c as b,b as o,w as s,F as k,b3 as h,a as E,k as V,g as f,i as w,j as y,E as C}from"./index-5d8d79d8.js";import{u as $}from"./index-99711252.js";const U=g({setup(){},data(){return{userForm:{email:"",password:""},rules:{email:[{required:!0,message:"请输入正确的电子邮箱",tirgger:"blur"},{type:"email",message:"电子邮箱格式错误",tirgger:"blur"}],password:[{required:!0,message:"请输入正确的用户密码",tirgger:"blur"},{min:8,message:"密码长度不得小于8",tirgger:"blur"}]}}},methods:{..._(h,["setToken","fillUserinfo"]),btnLogin(){const e=this,r=e.$refs.ruleFormRef;r&&r.validate(u=>{if(u)$(e.userForm).then(t=>{if(t.success){const l=t.data.userinfo;e.setToken(l.token),e.fillUserinfo(l),this.$router.push("/dormitory_first")}else return!1}).catch(t=>{console.log(t)});else return console.log("error submit"),!1})},resetForm(){this.$refs.ruleFormRef.resetFields()}}}),q=E("meta",{"http-equiv":"Content-Security-Policy",content:"upgrade-insecure-requests"},null,-1);function B(e,r,u,d,t,l){const m=w,a=y,i=C,p=V;return F(),b(k,null,[q,o(p,{ref:"ruleFormRef",model:e.userForm,"status-icon":"",rules:e.rules,class:"demo-ruleForm"},{default:s(()=>[o(a,{label:"用户邮箱",prop:"email"},{default:s(()=>[o(m,{modelValue:e.userForm.email,"onUpdate:modelValue":r[0]||(r[0]=n=>e.userForm.email=n),autocomplete:"off",placeholder:"请输入你的邮箱","suffix-icon":"Message"},null,8,["modelValue"])]),_:1}),o(a,{label:"用户密码",prop:"password"},{default:s(()=>[o(m,{type:"password",modelValue:e.userForm.password,"onUpdate:modelValue":r[1]||(r[1]=n=>e.userForm.password=n),autocomplete:"off",placeholder:"请输入你的密码","suffix-icon":"Lock"},null,8,["modelValue"])]),_:1}),o(a,null,{default:s(()=>[o(i,{type:"primary",onClick:e.btnLogin},{default:s(()=>[f("用户登录")]),_:1},8,["onClick"]),o(i,{onClick:e.resetForm},{default:s(()=>[f("重置")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])],64)}const R=c(U,[["render",B]]);export{R as default};
